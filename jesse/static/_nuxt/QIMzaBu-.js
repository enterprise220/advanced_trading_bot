import{o as a,c as m,b as i,g as z,R as ke,r as w,F,m as ae,q as V,w as k,d as o,t as N,U as le,B as l,X as pe,Y as fe,Z as Ue,$ as je,af as q,D as Z,K as B,f as Me,W as Ae,i as x,H as O,e as xe,a3 as Re,N as Oe,a9 as $e,ag as Be,v as ie,aa as Ne,ah as ze,ai as ge,a as De,aj as Fe,ak as qe,al as He,am as We,an as Ye,h as Ze,z as Je,j as ee,k as Qe,l as Ge,V as ve,C as $,J as D,I as ye,P as te,L as Ke,a5 as Xe,M as et,O as tt,S as st}from"./Dl48H-cf.js";import{r as ot}from"./BOWmeQum.js";import{r as rt}from"./EV21_tF2.js";import{b as we,_ as nt,a as lt}from"./vc5xxGwi.js";import{_ as at}from"./CXvS0V0S.js";import{r as be,_ as it,a as ut,d as dt,c as ct}from"./CDZc91Rq.js";import{_ as mt}from"./BTdtwO3f.js";import{s as he,T as pt,l as ft,d as gt,_ as vt}from"./D8y8SFVF.js";import{u as yt}from"./DCynXvCa.js";function _e(C,s){return a(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function bt(C,s){return a(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}const ht={base:"animate-pulse",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-md"},_t={class:"mb-4"},kt={class:""},xt={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},$t=["onClick"],wt=["onClick"],Ct={class:"absolute right-[1em] focus:outline-none"},Tt=z({__name:"LiveTabs",props:{tabs:{}},emits:["close","cancel"],setup(C,{emit:s}){const g=ke(),f=w(g.params.id),v=s;function n(){if(Object.keys(q().tabs).length>=Z().planLimits.live_trading_tabs){B("error",`You have reached the limit of "${Z().planLimits.live_trading_tabs}" tabs for your "${Z().plan}" plan. Please upgrade your plan to add more tabs.`);return}q().addTab()}function _(u){if(!u.form.routes.length)return"New Tab";if(u.results.exception.error&&u.results.monitoring)return"Error";const c=u.form.routes[0];let r="";const h=u.form.exchange;return h&&(r+=`${h} â€¢ `),c.strategy&&(r+=`${c.strategy} â€¢ `),c.symbol&&(r+=`${c.symbol} â€¢ `),c.timeframe&&(r+=`${c.timeframe}`),r=r.endsWith(" â€¢ ")?r.slice(0,-3):r,u.results.monitoring&&!u.results.finished?`ðŸŸ¢ ${r}`:u.results.exception.error&&u.results.monitoring?`ðŸ”´ ${r}`:u.results.showResults?`${r} | Results`:r}return(u,c)=>{const r=Me,h=Ae;return a(),m("div",_t,[i("div",kt,[i("nav",xt,[(a(!0),m(F,null,ae(u.tabs,y=>(a(),V(h,{key:y.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",text:_(y),"open-delay":700,onMouseup:je(E=>v("close",y.id),["middle"])},{default:k(()=>[o(r,{to:`/live/${y.id}`,class:le([y.id===l(f)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","whitespace-nowrap py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"])},{default:k(()=>[i("span",null,N(_(y)),1),i("span",{"aria-hidden":"true",class:le([y.id===l(f)&&Object.keys(u.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)]),_:2},1032,["to","class"]),(y.results.booting||y.results.monitoring)&&!y.results.finished?pe((a(),m("button",{key:0,class:"absolute right-[0.5em] focus:outline-none",onClick:E=>v("cancel",y.id)},[o(l(ot),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,$t)),[[fe,Object.keys(u.tabs).length>1]]):pe((a(),m("button",{key:1,class:"absolute right-[0.5em] focus:outline-none",onClick:E=>v("close",y.id)},[o(l(Ue),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,wt)),[[fe,Object.keys(u.tabs).length>1]])]),_:2},1032,["text","onMouseup"]))),128)),o(h,{text:"New Tab",popper:{arrow:!0}},{default:k(()=>[i("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center",onClick:n},[i("button",Ct,[o(l(rt),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),c[0]||(c[0]=i("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1))])]),_:1})])])])}}}),Vt=z({__name:"LiveOrders",props:{orders:{}},setup(C){const s=C,g=x(()=>{if(!s.orders.length)return[];const f=[];for(let v=s.orders.length-1;v>=0;v--){const n=s.orders[v];f.push([{value:n.id.slice(-12),style:"text-xs",tooltip:n.id,tag:"code"},{value:O.timestampToTimeOnly(n.created_at),style:"text-xs",tooltip:O.timestampToTime(n.created_at)},{value:n.symbol,style:"text-xs"},{value:n.type,style:"text-xs"},{value:n.side,style:O.colorBasedOnSide(n.side)},{value:n.price,style:"text-xs"},{value:n.qty,style:O.colorBasedOnSide(n.side)},{value:n.status,style:"text-xs"}])}return f});return(f,v)=>{const n=we,_=at;return l(g).length?(a(),V(n,{key:0,data:l(g),"header-items":["ID","Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])):(a(),V(_,{key:1}))}}}),Lt={class:"flex justify-end item-center"},St={class:"flex justify-end"},Pt=z({__name:"ReportLiveSession",props:{session:{}},emits:["close"],setup(C,{emit:s}){const g=s,f=w(!1),v=C,n=w({description:"",email:""}),_=()=>{g("close")},u=async()=>{if(f.value=!0,!n.value.description){B("error","Please enter a description."),f.value=!1;return}const{data:c,error:r}=await Re("/report-exception",{description:n.value.description,email:n.value.email,traceback:"manual report",mode:"live",attach_logs:!0,session_id:v.session},!0);if(f.value=!1,r.value&&r.value.statusCode!==200){B("error",`[${r.value.statusCode}]: ${r.value.statusText}`);return}const h=c.value;h.status==="success"?(n.value.description="",n.value.email="",B("success",h.message),_()):h.status==="error"&&B("error",h.message)};return(c,r)=>{const h=Oe,y=$e,E=Be,T=ie,j=Ne;return a(),m(F,null,[r[5]||(r[5]=i("p",null," If you think something is wrong with your running live session, you can submit a report. By submitting this form, the logs of this session will be sent to Jesse's developers so we can see what's going on. ",-1)),r[6]||(r[6]=i("br",null,null,-1)),r[7]||(r[7]=i("p",null,[xe("Your exchange API keys and strategies are safe and "),i("b",null,"are never sent to us.")],-1)),r[8]||(r[8]=i("br",null,null,-1)),o(j,{state:l(n),class:"space-y-4",onSubmit:u},{default:k(()=>[o(y,{label:"Email (optional)",help:"Enter your email address for us to know who sent the email and possibly reply back to you."},{default:k(()=>[o(h,{modelValue:l(n).email,"onUpdate:modelValue":r[0]||(r[0]=S=>l(n).email=S),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1}),r[3]||(r[3]=i("br",null,null,-1)),o(y,{label:"Description:",name:"Description"},{default:k(()=>[o(E,{modelValue:l(n).description,"onUpdate:modelValue":r[1]||(r[1]=S=>l(n).description=S),rows:10,placeholder:"Describe what you think is wrong in this session..."},null,8,["modelValue"])]),_:1}),r[4]||(r[4]=i("br",null,null,-1)),i("div",Lt,[i("div",St,[o(T,{color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:r[2]||(r[2]=S=>_())}),o(T,{type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:l(f),disabled:l(f)},null,8,["loading","disabled"])])])]),_:1},8,["state"])],64)}}}),Et=ze(ge.ui.strategy,ge.ui.skeleton,ht),It=z({inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(C){const{ui:s,attrs:g}=Fe("skeleton",qe(C,"ui"),Et),f=x(()=>He(We(s.value.base,s.value.background,s.value.rounded),C.class));return{ui:s,attrs:g,skeletonClass:f}}});function Ut(C,s,g,f,v,n){return a(),m("div",Ye({class:C.skeletonClass},C.attrs),null,16)}const jt=De(It,[["render",Ut]]),Mt={class:"mb-16"},At={key:0,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600 p-4"},Rt={key:1},Ot=z({__name:"CandlesChart",props:{form:{},results:{}},setup(C){const s=Ze(),g=x(()=>Je().params.id),f=w(!0),v=w(2),n=C,_=w();let u=null,c=null;const r={orderEntries:{},positionEntry:null},h=x(()=>s.value),y=n.form.exchange,E=x(()=>`${y}-${n.results.selectedRoute.symbol}-${n.results.selectedRoute.timeframe}`),T=x(()=>n.results.currentCandles),j=x(()=>{const p=n.results.positions.find(b=>b[0].value===n.results.selectedRoute.symbol);return p===void 0?[]:p}),S=x(()=>j.value[2].value),H=x(()=>Number(j.value[1].value)>0?"long":Number(j.value[1].value)<0?"short":"close");ee(T,(p,b)=>{c!==null&&se(p[E.value])}),ee(h,p=>{X(p)}),ee(S,(p,b)=>{c!==null&&p!==b&&G()}),ee(()=>n.results.orders,()=>{c!==null&&K()},{deep:!0}),Qe(async()=>{setTimeout(async()=>{await J()},200)});async function J(){f.value=!0,await q().fetchCandles(g.value),f.value=!1,he.width=_.value.clientWidth,u=pt(_.value,he),u.applyOptions({watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${n.results.selectedRoute.symbol} â€¢ ${n.results.selectedRoute.timeframe}`}}),c=u.addCandlestickSeries(),c.setData(n.results.candles),u.timeScale().fitContent(),c.applyOptions({priceFormat:{type:"price",precision:v.value,minMove:.01}}),G(),K(),X(h.value)}Ge(()=>{Q()});function Q(){u!==null&&(u.remove(),u=null),c&&(c=null)}function G(){const p=H.value==="long"?"#00AB5C":"#FF497D";if(r.positionEntry&&c.removePriceLine(r.positionEntry),Number(S.value)>0){const b={price:Number(S.value),color:p,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"Entry Price"};r.positionEntry=c.createPriceLine(b)}}function K(){const p=j.value[0].value;for(const b in r.orderEntries)c.removePriceLine(r.orderEntries[b]),delete r.orderEntries[b];n.results.orders.forEach(b=>{const P=b.side==="buy"?"#00AB5C":"#FF497D",A=ve.startCase(ve.lowerCase(`${b.side} ${b.type}`));if((b.status==="ACTIVE"||b.status==="QUEUED")&&b.symbol===p){const R={price:Number(b.price),color:P,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:A};r.orderEntries[b.id]=c.createPriceLine(R)}})}function se(p){if(p===void 0)throw new TypeError("candle is undefined!");if(n.results.candles.length===0||n.results.candles[n.results.candles.length-1].time>p.time)return;const P=String(p.open).indexOf("."),A=P===-1?0:String(p.open).length-P-1;v.value!==A&&(v.value=A,c.applyOptions({priceFormat:{type:"price",precision:v.value,minMove:Math.pow(10,-A).toFixed(A)}})),c.update(p)}function X(p){u!==null&&u.applyOptions(p==="light"?ft.chart:gt.chart)}function oe(p){n.results.selectedRoute=p,Q(),J()}return(p,b)=>{const P=jt,A=ie;return a(),m("div",Mt,[l(f)?(a(),m("div",At,[o(P,{class:"h-4 w-full mb-4"}),o(P,{class:"h-4 w-2/3 mb-4"}),o(P,{class:"h-4 w-1/2 mb-4"}),o(P,{class:"h-4 w-full mb-4"}),o(P,{class:"h-4 w-full mb-4"}),o(P,{class:"h-4 w-2/3 mb-4"}),o(P,{class:"h-4 w-full mb-4"}),o(P,{class:"h-4 w-full"})])):$("",!0),i("div",{ref_key:"chartContainer",ref:_,class:le({"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600":!l(f)})},null,2),n.form.routes.length>1?(a(),m("div",Rt,[(a(!0),m(F,null,ae(n.form.routes,R=>(a(),V(A,{key:R.symbol,variant:"soft",color:"gray",disabled:p.results.selectedRoute.symbol===R.symbol&&p.results.selectedRoute.timeframe===R.timeframe,class:"mt-2 mr-2",onClick:ue=>oe(R)},{default:k(()=>[xe(N(R.symbol)+" â€¢ "+N(R.timeframe),1)]),_:2},1032,["disabled","onClick"]))),128))])):$("",!0)])}}}),Bt={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},Nt=["textContent"],zt={class:"mt-8"},Dt={key:1,class:"mx-auto container mt-8"},Ft={key:0,"data-cy":"live-page-content"},qt={class:"flex justify-between items-center"},Ht={class:"grid grid-cols-1 gap-6"},Wt={class:"flex justify-between items-center"},Yt={key:1},Zt={key:0,class:"mb-8"},Jt={key:0},Qt={key:0,class:"mt-8 lg:mt-0"},Gt={key:1,"data-cy":"live-action-button"},Kt={key:1,class:"my-8 border-2 dark:border-gray-600 rounded-full"},Xt={key:2,class:"bg-white dark:bg-gray-700 grid grid-cols-1 gap-6 border dark:border-gray-600 rounded py-4 px-6 select-none"},es={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},ts={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ss={class:"flex justify-between items-center"},os={class:"flex justify-start items-center"},rs={class:"focus:outline-none flex justify-start items-center"},ns={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ls={class:"flex justify-between items-center"},as={class:"flex justify-start items-center"},is={class:"focus:outline-none flex justify-start items-center"},us={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ds={key:3},cs=z({__name:"LiveTab",props:{form:{},results:{},session:{}},setup(C){const s=C,g=w([]),f=w(!1),v=w(!1),n=w(!1),_=w(!1),u=w(!1),c=w(!1),r=w(!1),h=w(!1),y=w(!1),E=w(!1),T=Z(),j=q(),S=w([]);async function H(){if(!s.form.paper_mode){const e=T.exchangeApiKeys.find(t=>t.id===s.form.exchange_api_key_id);e&&(s.form.exchange=e.exchange)}S.value=await Z().getExchangeSupportedSymbols(s.form.exchange);for(let e=0;e<s.form.routes.length;e++)S.value.includes(s.form.routes[e].symbol)||(s.form.routes[e].symbol=S.value[0]);if(s.form.data_routes.length>0)for(let e=0;e<s.form.data_routes.length;e++)S.value.includes(s.form.data_routes[e].symbol)||(s.form.data_routes[e].symbol=S.value[0])}s.form.exchange&&H();const J=x(()=>{const e=[{label:"Exchange",value:s.results.generalInfo.exchange},{label:"Current Time",value:O.timestampToTime(s.results.generalInfo.current_time)},{label:"Debug Mode",value:s.results.generalInfo.debug_mode},{label:"Paper Trade",value:s.results.generalInfo.paper_mode},{label:"PNL",value:`${s.results.generalInfo.pnl} (${s.results.generalInfo.pnl_perc}%)`},{label:"Started",value:O.timestampToTime(s.results.generalInfo.started_at)},{label:"Started/Current Balance",value:`${s.results.generalInfo.started_balance} / ${s.results.generalInfo.current_balance}`},{label:"Trades",value:`${s.results.generalInfo.count_trades}`}];return s.results.generalInfo.leverage_type!=="spot"&&(e.push({label:"Available Margin",value:`${s.results.generalInfo.available_margin}`}),e.push({label:"Leverage",value:`${s.results.generalInfo.leverage}x (${s.results.generalInfo.leverage_type})`})),e}),Q=x(()=>T.notificationApiKeys.map(e=>({label:`${e.name} - ${e.driver}`,value:e.id}))),G=x(()=>Math.round(s.results.progressbar.estimated_remaining_seconds)===0?"Please wait...":`${Math.round(s.results.progressbar.estimated_remaining_seconds)} seconds remaining...`),K=x(()=>{if(!s.results.orders)return[];const e=[],t=5,I=s.results.orders.length,U=I-t>=0?I-t:0;for(let W=I-1;W>=U;W--){const L=s.results.orders[W],M=L.status==="PARTIALLY FILLED"?`${L.filled_qty}/${L.qty}`:L.qty;e.push([{value:O.timestampToTimeOnly(L.created_at),style:"text-xs",tooltip:O.timestampToTime(L.created_at)},{value:L.symbol,style:"text-xs"},{value:L.type,style:"text-xs"},{value:L.side,style:O.colorBasedOnSide(L.side)},{value:L.price,style:"text-xs"},{value:M,style:O.colorBasedOnSide(L.side)},{value:L.status,style:"text-xs"}])}return e}),se=x(()=>{let e=[];const t=T.jesseSupportedTimeframes;return T.settings.live.generate_candles_from_1m||!s.form.exchange?e=t.map(I=>T.planLimits.timeframes.includes(I)?{label:I,value:I,disabled:!1}:{label:`${I} (Upgrade required)`,value:I,disabled:!0}):e=T.exchangeInfo[s.form.exchange].supported_timeframes.map(U=>T.planLimits.timeframes.includes(U)?{label:U,value:U,disabled:!1}:{label:`${U} (Upgrade required)`,value:U,disabled:!0}),e}),X=x(()=>T.liveTradingExchangeNames.map(e=>T.planLimits.exchanges.includes(e)?{label:e,value:e,disabled:!1}:{label:`${e} (Upgrade required)`,value:e,disabled:!0})),oe=x(()=>T.exchangeApiKeys.map(e=>T.planLimits.exchanges.includes(e.exchange)?{label:`${e.exchange} - ${e.name}`,value:e.id,disabled:!1}:{label:`${e.exchange} - ${e.name} (Upgrade required)`,value:e.id,disabled:!0})),p=j.cancel,b=j.newLive;function P(e){if(g.value.length){for(let t=0;t<g.value.length;t++)B("error",g.value[t]);return}if(s.form.paper_mode&&!s.form.exchange||!s.form.paper_mode&&s.form.exchange_api_key_id===""){B("error","Please select an exchange");return}j.start(e)}function A(e){E.value=!1,j.stop(e)}function R(){v.value=!0,navigator.clipboard.writeText(s.results.infoLogs),B("success","Logs copied successfully"),_.value=!0,setTimeout(()=>{_.value=!1},3e3)}function ue(){n.value=!0,navigator.clipboard.writeText(s.results.errorLogs),B("success","Logs copied successfully"),u.value=!0,setTimeout(()=>{u.value=!1},3e3)}const de=x(()=>["basic","pro","enterprise","lifetime"].includes(T.plan));return(e,t)=>{const I=Vt,U=Ke,W=Pt,L=nt,M=ie,Ce=Xe,Te=it,ce=ut,Y=et,re=mt,Ve=lt,me=tt,Le=$e,Se=Ot,ne=we,Pe=dt,Ee=vt,Ie=ct;return a(),m(F,null,[o(U,{modelValue:l(c),"onUpdate:modelValue":t[0]||(t[0]=d=>D(c)?c.value=d:null),size:"ultra",title:"Orders"},{default:k(()=>[o(I,{orders:e.results.orders},null,8,["orders"])]),_:1},8,["modelValue"]),o(U,{modelValue:l(r),"onUpdate:modelValue":t[2]||(t[2]=d=>D(r)?r.value=d:null),size:"small",title:"Report An Issue"},{default:k(()=>[o(W,{session:e.session,onClose:t[1]||(t[1]=d=>r.value=!1)},null,8,["session"])]),_:1},8,["modelValue"]),o(U,{modelValue:l(h),"onUpdate:modelValue":t[3]||(t[3]=d=>D(h)?h.value=d:null),title:"Info Logs"},{default:k(()=>[o(L,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:k(()=>[i("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:R},[l(_)?(a(),V(l(ye),{key:0,class:"h-6 w-6","aria-hidden":"true"})):$("",!0),!l(_)&&e.results.infoLogs.length!=0?(a(),V(l(be),{key:1,class:"h-6 w-6","aria-hidden":"true"})):$("",!0)])]),_:1},8,["modelValue"]),o(U,{modelValue:l(y),"onUpdate:modelValue":t[4]||(t[4]=d=>D(y)?y.value=d:null),title:"Error Logs"},{default:k(()=>[o(L,{logs:e.results.errorLogs},null,8,["logs"])]),buttons:k(()=>[i("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:ue},[l(u)?(a(),V(l(ye),{key:0,class:"h-6 w-6","aria-hidden":"true"})):$("",!0),!l(u)&&e.results.errorLogs.length!=0?(a(),V(l(be),{key:1,class:"h-6 w-6","aria-hidden":"true"})):$("",!0)])]),_:1},8,["modelValue"]),o(Ce,{modelValue:l(E),"onUpdate:modelValue":t[6]||(t[6]=d=>D(E)?E.value=d:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:k(()=>[o(M,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:t[5]||(t[5]=d=>A((e._.provides[te]||e.$route).params.id))})]),_:1},8,["modelValue"]),e.results.booting?(a(),m("div",Bt,[i("div",null,[o(Te,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?$("",!0):(a(),m("h3",{key:0,class:"mt-8 animate-pulse",textContent:N(l(G))},null,8,Nt)),i("div",zt,[e.form.debug_mode?(a(),V(M,{key:0,icon:"i-heroicons-clipboard-document-list",variant:"solid",label:"View Logs",size:"xl",class:"flex justify-center w-64",onClick:t[7]||(t[7]=d=>h.value=!0)})):$("",!0),o(M,{color:"gray",class:"w-64 flex justify-center mt-4",size:"xl",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},icon:"i-heroicons-no-symbol",variant:"solid",label:"Cancel",trailing:!1,onClick:t[8]||(t[8]=d=>l(p)((e._.provides[te]||e.$route).params.id))})]),e.results.exception.error?(a(),m("div",Dt,[o(ce,{modelValue:l(f),"onUpdate:modelValue":t[9]||(t[9]=d=>D(f)?f.value=d:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):$("",!0)])):(a(),V(Ie,{key:1},{left:k(()=>[!e.results.booting&&!e.results.monitoring&&!e.results.showResults?(a(),m("div",Ft,[o(Y,{class:"mb-4",title:"Exchange"}),e.form.paper_mode?(a(),V(re,{key:0,modelValue:e.form.exchange,"onUpdate:modelValue":t[10]||(t[10]=d=>e.form.exchange=d),placeholder:"Select an exchange...",searchable:"",options:l(X),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:H},null,8,["modelValue","options"])):(a(),V(re,{key:1,modelValue:e.form.exchange_api_key_id,"onUpdate:modelValue":t[11]||(t[11]=d=>e.form.exchange_api_key_id=d),placeholder:"Select an exchange...",searchable:"",options:l(oe),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:H},{empty:k(()=>[i("div",qt,[t[22]||(t[22]=i("span",null," No exchange API keys found. Please add at least one: ",-1)),o(M,{to:"/exchange-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Exchange API Key"})])]),_:1},8,["modelValue","options"])),o(Ve,{"total-routes-error":l(g),form:e.form,results:e.results,mode:"live",symbols:l(S),timeframes:l(se)},null,8,["total-routes-error","form","results","symbols","timeframes"]),o(Y,{class:"mt-16 mb-4",title:"Options"}),i("div",Ht,[o(me,{modelValue:e.form.debug_mode,"onUpdate:modelValue":t[12]||(t[12]=d=>e.form.debug_mode=d),title:"Debug Mode",description:"Logs more details, helpful for debugging."},null,8,["modelValue"]),o(me,{modelValue:e.form.paper_mode,"onUpdate:modelValue":t[13]||(t[13]=d=>e.form.paper_mode=d),title:"Paper Trade",disabled:!l(de),"disabled-guide":l(de)?"":"Premium plan required",description:"Trade in real-time using actual exchange data with PAPER money."},null,8,["modelValue","disabled","disabled-guide"]),o(Le,{label:"Notifications:",help:"Select a notification driver to receive notifications"},{default:k(()=>[o(re,{modelValue:e.form.notification_api_key_id,"onUpdate:modelValue":t[14]||(t[14]=d=>e.form.notification_api_key_id=d),placeholder:"Select a notification driver",size:"lg",options:l(Q),"value-attribute":"value"},{empty:k(()=>[i("div",Wt,[t[23]||(t[23]=i("span",null," No notification API keys found. Please add at least one: ",-1)),o(M,{to:"/notification-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Notification API Key"})])]),_:1},8,["modelValue","options"])]),_:1})])])):$("",!0),e.results.monitoring?(a(),m("div",Yt,[e.results.exception.error?(a(),m("div",Zt,[o(ce,{title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["title","content","debug-mode"])])):$("",!0),e.results.monitoring&&!e.results.finished&&!e.results.exception.error?(a(),V(Se,{key:1,results:e.results,form:e.form,exchange:e.form.exchange},null,8,["results","form","exchange"])):$("",!0),o(Y,{class:"mb-4",title:"Routes"}),o(ne,{data:e.results.routes,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),o(Y,{class:"mt-12 mb-4",title:"Positions"}),o(ne,{data:e.results.positions,"header-items":["Symbol","QTY","Entry","Price","Liq Price","PNL"],header:""},null,8,["data"]),o(Pe,{class:"mt-12 mb-4",title:"Orders"},{default:k(()=>[i("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-900 text-sm leading-5 font-medium rounded-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",onClick:t[15]||(t[15]=d=>c.value=!0)},[o(l(bt),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),t[24]||(t[24]=i("span",null,"More",-1))])]),_:1}),o(ne,{data:l(K),"header-items":["Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])])):$("",!0)]),right:k(()=>[e.results.booting?$("",!0):(a(),m("div",Jt,[e.results.monitoring?(a(),m("div",Qt,[e.results.finished?(a(),V(M,{key:0,class:"w-full flex justify-center",variant:"solid",icon:"i-heroicons-plus",size:"xl",label:"New session",onClick:t[16]||(t[16]=d=>l(b)((e._.provides[te]||e.$route).params.id))})):(a(),V(M,{key:1,class:"w-full flex justify-center",variant:"solid",color:"gray",icon:"i-heroicons-no-symbol",size:"xl",label:e.results.terminating?"Terminating...":"Terminate",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},onClick:t[17]||(t[17]=d=>E.value=!0)},null,8,["label"])),e.results.monitoring||e.results.finished?(a(),V(M,{key:2,class:"w-full flex justify-center mt-4",variant:"solid",color:"gray",icon:"i-heroicons-flag",size:"xl",label:"Report",onClick:t[18]||(t[18]=d=>r.value=!0)})):$("",!0)])):(a(),m("div",Gt,[o(M,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:t[19]||(t[19]=d=>P((e._.provides[te]||e.$route).params.id))})]))])),e.results.monitoring?(a(),m("hr",Kt)):$("",!0),e.results.monitoring?(a(),m("dl",Xt,[(a(!0),m(F,null,ae(l(J),d=>(a(),m("div",{key:d.label,class:"flex justify-between items-center"},[i("div",es,N(d.label)+":",1),i("div",ts,N(d.value),1)]))),128)),i("div",ss,[i("div",os,[i("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:t[20]||(t[20]=d=>h.value=!0)},[t[25]||(t[25]=i("span",null,"Info Logs:",-1)),i("span",rs,[o(l(_e),{class:"w-6 h-6 ml-2"})])])]),i("div",ns,N(e.results.generalInfo.count_info_logs),1)]),i("div",ls,[i("div",as,[i("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:t[21]||(t[21]=d=>y.value=!0)},[t[26]||(t[26]=i("span",null,"Error Logs:",-1)),i("span",is,[o(l(_e),{class:"w-6 h-6 ml-2 cursor-pointer"})])])]),i("div",us,N(e.results.generalInfo.count_error_logs),1)])])):$("",!0),e.results.monitoring&&e.results.watchlist.length?(a(),m("div",ds,[o(Y,{class:"mt-8 mb-4",title:"Watch List"}),o(Ee,{data:e.results.watchlist},null,8,["data"])])):$("",!0)]),_:1}))],64)}}}),ms={class:"w-full"},xs=z({__name:"[id]",setup(C){yt({title:"Live/Paper trading - Jesse"});const s=q(),g=x(()=>s.tabs),f=ke(),v=x(()=>f.params.id),n=x(()=>{if(!g.value[v.value]){const _=Object.keys(g.value);if(_.length>0){const u=g.value[_[0]];return st().push(`/live/${u.id}`),u}}return g.value[v.value]});return Object.keys(g.value).length===0&&q().addTab(),(_,u)=>{const c=Tt,r=cs;return a(),m(F,null,[i("div",ms,[o(c,{tabs:g.value,onClose:l(s).closeTab,onCancel:l(s).cancel},null,8,["tabs","onClose","onCancel"])]),n.value?(a(),V(r,{key:0,form:n.value.form,results:n.value.results,session:v.value},null,8,["form","results","session"])):$("",!0)],64)}}});export{xs as default};
