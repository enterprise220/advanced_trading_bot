import{_ as Le}from"./JhRHuTQ1.js";import{r as Ee,_ as Ue,a as ze,b as Oe,c as Me,d as Ie,e as Be}from"./CMzRrssv.js";import{h as J,i as ve,j as x,r as L,k as P,l as ue,m as _e,o as l,c as f,b as _,F as H,n as ke,q as De,t as A,s as Ne,v as S,w as j,d as o,x as me,y as we,z as Pe,A as We,B as xe,C as N,D as s,E as i,G as ae,H as qe,I as Ce,J as Fe,K as fe,L as Ae,P as F,M as pe,e as ge,N as ne,O as He,Q as Je,R as Ge,S as Qe,T as Ye,U as Xe,V as Ze,W as Ke}from"./SHcTS-GR.js";import{_ as et}from"./BfhbypAR.js";import{_ as tt}from"./c_15FjTP.js";import{T as ie,l as he,d as be,s as re,_ as st}from"./DDB1NwnM.js";import{_ as ot}from"./B4Pr_Mgp.js";import{u as rt}from"./CGASYHmT.js";import"./CDkO0VO_.js";import"./CthfIpdN.js";const ye={width:800,height:400,priceScale:{borderColor:"rgba(197, 203, 206, 1)"},timeScale:{borderColor:"rgba(197, 203, 206, 1)",timeVisible:!0,secondsVisible:!1}},lt={chart:{layout:{background:{color:"#ffffff"},textColor:"rgba(33, 56, 77, 1)"},grid:{vertLines:{color:"#f1f1f1",visible:!0},horzLines:{color:"#f1f1f1",visible:!0}},priceScale:{borderColor:"rgba(197, 203, 206, 0.6)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.6)",timeVisible:!0,secondsVisible:!1}}},at={chart:{layout:{background:{color:"#333333"},textColor:"#D1D5DB"},grid:{vertLines:{color:"#525252",visible:!0},horzLines:{color:"#525252",visible:!0}},priceScale:{borderColor:"#525252"},timeScale:{borderColor:"#525252",timeVisible:!0,secondsVisible:!1}}},nt={class:"mt-2"},it={class:"ml-2"},ut=J({__name:"EquityCurve",props:{data:{}},setup(E){const r=ve(),u=x(()=>r.value),m=L();let d=null,g=[];const n=E;P(n.data,b=>{}),P(u,b=>{v(b)}),ue(async()=>{await h()});async function h(){ye.width=m.value.clientWidth,d=ie(m.value,ye);for(const b of n.data){const k=d.addLineSeries({lineWidth:2});k.setData(b.data),g.push(k)}d.timeScale().fitContent(),v(u.value)}_e(()=>{p()});function p(){d!==null&&(d.remove(),d=null),g&&(g=[])}function v(b){d===null||g===null||d.applyOptions(b==="light"?lt.chart:at.chart)}return(b,k)=>(l(),f(H,null,[_("div",{ref_key:"chartContainer",ref:m,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600"},null,512),_("div",nt,[(l(!0),f(H,null,ke(b.data,w=>(l(),f("span",{key:w.name,class:"text-xs mr-2 rounded bg-white dark:bg-gray-700 p-1"},[_("span",{class:"inline-block",style:De({backgroundColor:w.color,width:"25px",height:"10px"})},null,4),_("span",it,A(w.name),1)]))),128))])],64))}}),dt={class:"flex items-center justify-between"},ct=J({__name:"FullscreenModal",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(E){const r=Ne(E,"modelValue");return(u,m)=>{const d=we,g=Pe,n=We;return l(),S(n,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=h=>r.value=h),fullscreen:""},{default:j(()=>[o(g,{ui:{base:"h-full flex flex-col",rounded:"",divide:"divide-y divide-gray-100 dark:divide-gray-800",body:{base:"grow"}}},{header:j(()=>[_("div",dt,[_("div",null,[me(u.$slots,"title")]),o(d,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:m[0]||(m[0]=h=>r.value=!1)})])]),default:j(()=>[me(u.$slots,"default")]),_:3})]),_:3},8,["modelValue"])}}}),mt={class:"flex flex-col h-full border dark:border-gray-800"},ft={key:0},pt=J({__name:"BacktestCandlesChart",props:{form:{},results:{}},setup(E){const r=ve(),u=L(2),m=E,d=L(),g=L([]);let n=null,h=null;const p=[],v=[],b=x(()=>xe().params.id),k=x(()=>N.extraChartLines[b.value].find(y=>y.symbol===m.results.selectedRoute.symbol)),w=x(()=>r.value);P(w,y=>{X(y)}),P(()=>m.results.selectedRoute.symbol,()=>{Y(),setTimeout(async()=>{await G()},100)}),ue(async()=>{setTimeout(async()=>{await G()},200)});async function G(){var K,ee,R,te;re.width=d.value.clientWidth,re.height=d.value.clientHeight-Object.keys(k.value.charts).length*150,n=ie(d.value,re),n.applyOptions({rightPriceScale:{borderColor:w.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${m.results.selectedRoute.symbol} • ${m.results.selectedRoute.timeframe}`}}),h=n.addCandlestickSeries();const y=N.candles[b.value].find(c=>c.symbol===m.results.selectedRoute.symbol).candles;h.setData(y),h.setMarkers(N.orders[b.value].find(c=>c.symbol===m.results.selectedRoute.symbol).orders);const $=String(y[0].open).indexOf("."),T=$===-1?0:String(y[y.length-1].open).length-$-1;u.value!==T&&(u.value=T,h.applyOptions({priceFormat:{type:"price",precision:u.value,minMove:Math.pow(10,-u.value).toFixed(u.value)}}));const I=(ee=(K=N.lines[b.value])==null?void 0:K.find(c=>c.symbol===m.results.selectedRoute.symbol))==null?void 0:ee.lines;if(I)for(const c of Object.keys(I)){const C=I[c];n.addLineSeries({lineWidth:1,title:c}).setData(C.data)}const W=(te=(R=N.horizontalLines[b.value])==null?void 0:R.find(c=>c.symbol===m.results.selectedRoute.symbol))==null?void 0:te.lines;if(W)for(const c of Object.keys(W)){const e=W[c];h.createPriceLine(e)}n.timeScale().fitContent();const Z=new Set;Object.keys(k.value.charts).forEach((c,C)=>{const e={...re};e.width=g.value[C].clientWidth,e.height=150;const t=ie(g.value[C],e);p.push(t),Object.keys(k.value.charts[c]).forEach(U=>{var V,se;const z=t.addLineSeries({lineWidth:1,title:U}),q=(se=(V=N.horizontalExtraLines[b.value])==null?void 0:V.find(B=>B.symbol===m.results.selectedRoute.symbol))==null?void 0:se.lines[c];if(q&&!Z.has(c)){for(const B of Object.keys(q)){const oe=q[B];z.createPriceLine(oe)}Z.add(c)}z.setData(k.value.charts[c][U].data),v.push(z)}),t.applyOptions({rightPriceScale:{borderColor:w.value==="light"?"#d1d4dc":"#4b5563",minimumWidth:80},watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:c}}),t.timeScale().subscribeVisibleLogicalRangeChange(U=>{n.timeScale().setVisibleLogicalRange(U)}),C!==Object.keys(k.value.charts).length-1&&t.timeScale().applyOptions({visible:!1})}),n.subscribeCrosshairMove(c=>{const C=Q(h,c);Object.keys(k.value.charts).forEach((e,t)=>{M(p[t],v[t],C)})}),Object.keys(k.value.charts).forEach((c,C)=>{p[C].subscribeCrosshairMove(e=>{const t=Q(v[C],e);M(n,h,t),p.forEach((U,z)=>{z!==C&&M(U,v[z],t)})})}),n.timeScale().subscribeVisibleLogicalRangeChange(c=>{p.forEach(C=>{C.timeScale().setVisibleLogicalRange(c)})}),X(w.value),p.length>0&&n.timeScale().applyOptions({visible:!1})}_e(()=>{Y()});function Q(y,$){return $.time&&$.seriesData.get(y)||null}function M(y,$,T){if(T){y.setCrosshairPosition(T.value,T.time,$);return}y.clearCrosshairPosition()}function Y(){n!==null&&(n.remove(),n=null),h!==null&&(h=null),p.length>0&&(p.forEach(y=>{y.remove()}),p.length=0),v.length>0&&(v.length=0)}function X(y){n!==null&&(n.applyOptions(y==="light"?he.chart:be.chart),p.forEach($=>{$.applyOptions(y==="light"?he.chart:be.chart)}))}return(y,$)=>(l(),f("div",mt,[_("div",{ref_key:"chartContainer",ref:d,class:"rounded overflow-hidden flex-grow"},null,512),s(k)&&Object.keys(s(k).charts).length?(l(),f("div",ft,[(l(!0),f(H,null,ke(Object.keys(s(k).charts),T=>(l(),f("div",{key:T,ref_for:!0,ref_key:"extraChartsRef",ref:g,class:"relative border-t-[1.5px] dark:border-gray-800"}))),128))])):i("",!0)]))}}),gt=["value"],ht={key:1,class:"flex flex-col items-center justify-center select-none mt-[10%]"},bt=["textContent"],yt={class:"mt-8"},vt={class:"mt-8"},_t={class:"mt-4"},kt=["href"],wt={key:1,class:"mx-auto container mt-8"},xt={key:0},Ct=_("h3",{class:"text-lg font-semibold"},"Missing Required Warmup Candles",-1),Vt={class:"mb-4 mt-4"},St=_("strong",{class:"font-bold"},"warmup candles",-1),$t={class:"flex items-center select-none flex-1 my-4"},Rt={class:"grid grid-cols-1 gap-6 mt-8"},Tt={key:1,class:"w-full mx-auto"},jt={key:4,class:"text-yellow-500 border-yellow-400 bg-yellow-50 dark:bg-gray-700 dark:text-yellow-400 mt-16 text-center text-2xl rounded border-2 border-dashed dark:border-gray-800 py-16 select-none"},Lt={key:0},Et={key:0},Ut=["href"],zt=["href"],Ot=["href"],Mt=["href"],It=["href"],Bt={key:6,class:"my-4"},Dt={key:1},Nt=J({__name:"BacktestTab",props:{form:{},results:{}},setup(E){const r=E,u=L([]),m=L(!1),d=L(!1),g=ae().authToken,n=L(qe().public.apiBaseUrl),h=L(!1),p=x(()=>xe().params.id),v=Ce(),b=ae(),k=Fe(),w=L([]),G=x(()=>b.jesseSupportedTimeframes.map(e=>({label:e,value:e}))),Q=x(()=>r.form.routes.map(e=>({label:`${e.strategy} • ${e.symbol}`,value:e})));r.results.selectedRoute=r.form.routes[0],ue(async()=>{await b.initiate(),!r.form.exchange&&b.backtestingExchangeNames.length&&(r.form.exchange=b.backtestingExchangeNames[0]),(!r.results.showResults&&r.form.exchange||!w.value.length)&&await M()});async function M(){if(r.form.exchange)try{w.value.length||(w.value=await b.getExchangeSupportedSymbols(r.form.exchange));for(let e=0;e<r.form.routes.length;e++)w.value.includes(r.form.routes[e].symbol)||(r.form.routes[e].symbol=w.value[0]);if(r.form.data_routes.length>0)for(let e=0;e<r.form.data_routes.length;e++)w.value.includes(r.form.data_routes[e].symbol)||(r.form.data_routes[e].symbol=w.value[0])}catch(e){console.error("Error updating supported symbols:",e)}}P(()=>r.form.exchange,async(e,t)=>{e!==t&&(w.value=[],await M())});const{cancel:Y,rerun:X,newBacktest:y}=v;function $(e){if(u.value.length){for(let t=0;t<u.value.length;t++)ne("error",u.value[t]);return}v.start(e)}const T=e=>{if(u.value.length){for(let t=0;t<u.value.length;t++)ne("error",u.value[t]);return}v.startInNewTab(e)},I=x(()=>{let e=`/download/backtest/log/${r.results.generalInfo.session_id}?token=${g}`;return n.value!=="/"&&(e=n.value+e),e}),W=x(()=>{let e=`/download/backtest/tradingview/${r.results.generalInfo.session_id}?token=${g}`;return n.value!=="/"&&(e=n.value+e),e}),Z=x(()=>{let e=`/download/backtest/full-reports/${r.results.generalInfo.session_id}?token=${g}`;return n.value!=="/"&&(e=n.value+e),e}),K=x(()=>{let e=`/download/backtest/csv/${r.results.generalInfo.session_id}?token=${g}`;return n.value!=="/"&&(e=n.value+e),e}),ee=x(()=>{let e=`/download/backtest/json/${r.results.generalInfo.session_id}?token=${g}`;return n.value!=="/"&&(e=n.value+e),e}),R=x(()=>v.formattedMetrics(p.value).length>0),te=x(()=>fe.remainingTimeText(r.results.progressbar.estimated_remaining_seconds));function c(){navigator.clipboard.writeText(r.results.infoLogs),ne("success","Logs copied successfully"),d.value=!0,setTimeout(()=>{d.value=!1},3e3)}P(()=>r.form.start_date,e=>{r.form.finish_date<e&&(r.form.finish_date=e)});async function C(){const e=v.missingCandlesErrors[p.value];e&&(k.forms.push({id:fe.uuid(),exchange:e.exchange,symbol:e.symbol,start_date:e.start_date,executing:!1,waiting:!1,progressbar:{current:0,estimated_remaining_seconds:0},exception:{error:"",traceback:""},alert:{message:"",type:""}}),await He("/candles/"),await k.start(k.forms[k.forms.length-1].id))}return(e,t)=>{const U=Ue,z=Je,q=ze,V=we,se=Oe,B=et,D=Ge,oe=tt,Ve=Me,de=Qe,O=Ye,Se=ut,ce=Xe,$e=ct,le=ot,Re=st,Te=Ie,je=Be;return l(),f(H,null,[e.form.debug_mode?(l(),S(z,{key:0,modelValue:e.results.logsModal,"onUpdate:modelValue":t[0]||(t[0]=a=>e.results.logsModal=a),title:"Logs"},{default:j(()=>[o(U,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:j(()=>[_("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:c},[s(d)?(l(),S(s(Ae),{key:0,class:"h-6 w-6","aria-hidden":"true"})):i("",!0),!s(d)&&e.results.infoLogs.length!=0?(l(),S(s(Ee),{key:1,class:"h-6 w-6","aria-hidden":"true"})):i("",!0)]),_("input",{id:"copy-info-logs",type:"hidden",value:e.results.infoLogs},null,8,gt)]),_:1},8,["modelValue"])):i("",!0),e.results.executing&&!e.results.showResults?(l(),f("div",ht,[_("div",null,[o(q,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?i("",!0):(l(),f("h3",{key:0,class:"mt-8 animate-pulse",textContent:A(s(te))},null,8,bt)),_("div",yt,[_("div",vt,[o(V,{color:"gray",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},class:"w-64 flex justify-center",icon:"i-heroicons-no-symbol",size:"xl",variant:"solid",label:"Cancel",trailing:!1,onClick:t[1]||(t[1]=a=>s(Y)((e._.provides[F]||e.$route).params.id))})]),_("div",_t,[e.form.debug_mode&&e.results.exception.error&&e.results.progressbar.current!==0?(l(),f("a",{key:0,href:s(I),class:"flex justify-center items-center btn-secondary text-center mb-4 w-full"},[o(V,{icon:"i-heroicons-document-arrow-down",label:"Debugging Logs",color:"gray",size:"xl",variant:"solid",trailing:!1,class:"w-64 flex justify-center"})],8,kt)):i("",!0)])]),e.results.exception.error&&e.results.executing?(l(),f("div",wt,[o(se,{modelValue:s(m),"onUpdate:modelValue":t[2]||(t[2]=a=>pe(m)?m.value=a:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"backtest","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):i("",!0)])):i("",!0),o(je,null,{left:j(()=>[!e.results.executing&&!e.results.showResults?(l(),f("div",xt,[s(v).missingCandlesErrors[s(p)]?(l(),S(B,{key:0,icon:"i-heroicons-exclamation-triangle",color:"rose",variant:"soft",class:"mb-4"},{title:j(()=>[Ct]),description:j(()=>[_("p",Vt,[ge(" Your strategy requires "),St,ge(' for "'+A(s(v).missingCandlesErrors[s(p)].symbol)+'" on "'+A(s(v).missingCandlesErrors[s(p)].exchange)+'" starting from "'+A(s(v).missingCandlesErrors[s(p)].start_date)+'". These candles are needed for proper strategy initialization. ',1)]),o(V,{label:"Import Required Candles",icon:"i-heroicons-arrow-down-tray",onClick:C})]),_:1})):i("",!0),o(D,{class:"mb-4",title:"Exchange"}),o(oe,{modelValue:e.form.exchange,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.exchange=a),placeholder:"Select an exchange...",searchable:"",options:s(ae)().backtestingExchangeNames,size:"lg",class:"mt-2 mb-16",onChange:M},null,8,["modelValue","options"]),o(Ve,{"total-routes-error":s(u),timeframes:s(G),form:e.form,results:e.results,symbols:s(w),mode:"backtest"},null,8,["total-routes-error","timeframes","form","results","symbols"]),o(D,{class:"mt-16",title:"Duration"}),_("div",$t,[o(de,{modelValue:e.form.start_date,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.start_date=a),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),o(de,{modelValue:e.form.finish_date,"onUpdate:modelValue":t[5]||(t[5]=a=>e.form.finish_date=a),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])]),o(D,{class:"mt-16",title:"Options"}),_("div",Rt,[o(O,{modelValue:e.form.debug_mode,"onUpdate:modelValue":t[6]||(t[6]=a=>e.form.debug_mode=a),title:"Debug Mode",description:"Logs every step of the execution. Very helpful for debugging your strategy but takes a lot longer to execute"},null,8,["modelValue"]),o(O,{modelValue:e.form.export_chart,"onUpdate:modelValue":t[7]||(t[7]=a=>e.form.export_chart=a),title:"Generate Interactive Charts",description:"Generate interactive charts for backtest results with details."},null,8,["modelValue"]),o(O,{modelValue:e.form.export_tradingview,"onUpdate:modelValue":t[8]||(t[8]=a=>e.form.export_tradingview=a),title:"Export Tradingview",description:"Exports the executed trades in a format accepted by TradingView's Pine Editor. Useful to look at the executed orders on their chart."},null,8,["modelValue"]),o(O,{modelValue:e.form.export_full_reports,"onUpdate:modelValue":t[9]||(t[9]=a=>e.form.export_full_reports=a),title:"Export QuantStats reports",description:"Exports a HTML file generated by QuantStats library."},null,8,["modelValue"]),o(O,{modelValue:e.form.export_csv,"onUpdate:modelValue":t[10]||(t[10]=a=>e.form.export_csv=a),title:"Export CSV",description:"Exports executed trades in a CSV format"},null,8,["modelValue"]),o(O,{modelValue:e.form.export_json,"onUpdate:modelValue":t[11]||(t[11]=a=>e.form.export_json=a),title:"Export JSON",description:"Exports executed trades in a JSON format"},null,8,["modelValue"]),o(O,{modelValue:e.form.fast_mode,"onUpdate:modelValue":t[12]||(t[12]=a=>e.form.fast_mode=a),title:"Fast Mode",description:"Runs the backtest faster by using an improved algorithm. This is supposed to yield the same results; however, it's currently experimental, which is why it's an option."},null,8,["modelValue"]),o(O,{modelValue:e.form.benchmark,"onUpdate:modelValue":t[13]||(t[13]=a=>e.form.benchmark=a),title:"Benchmark",description:"If enabled, the backtest will compare the performance of the strategy against the buy and hold strategy of the market."},null,8,["modelValue"])])])):i("",!0),e.results.showResults?(l(),f("div",Tt,[_("div",null,[s(R)?(l(),S(D,{key:0,class:"mb-4",title:"Equity Curve"})):i("",!0),s(R)?(l(),S(Se,{key:1,data:e.results.charts.equity_curve},null,8,["data"])):i("",!0),s(R)?(l(),S(D,{key:2,class:"mt-16 mb-4",title:"Performance"})):i("",!0),s(R)?(l(),S(ce,{key:3,data:s(v).formattedMetrics(s(p))},null,8,["data"])):i("",!0),s(R)?i("",!0):(l(),f("div",jt," No trades were executed via this strategy! "))]),o($e,{modelValue:s(h),"onUpdate:modelValue":t[15]||(t[15]=a=>pe(h)?h.value=a:null)},{title:j(()=>[o(oe,{modelValue:e.results.selectedRoute,"onUpdate:modelValue":t[14]||(t[14]=a=>e.results.selectedRoute=a),"value-attribute":"value",options:s(Q)},null,8,["modelValue","options"])]),default:j(()=>[o(pt,{results:e.results,form:e.form},null,8,["results","form"])]),_:1},8,["modelValue"])])):i("",!0)]),right:j(()=>[e.results.executing?i("",!0):(l(),f("div",Lt,[e.results.showResults?(l(),f("div",Et,[o(V,{class:"w-full flex justify-center",icon:"i-heroicons-arrow-path",size:"xl",variant:"solid",label:"Rerun",trailing:!1,onClick:t[16]||(t[16]=a=>s(X)((e._.provides[F]||e.$route).params.id))}),o(V,{class:"w-full flex justify-center mt-4",color:"green",icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",label:"New session",trailing:!1,onClick:t[17]||(t[17]=a=>s(y)((e._.provides[F]||e.$route).params.id))}),e.form.debug_mode?(l(),f("a",{key:0,href:s(I),target:"_blank",class:""},[o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"Debugging Logs",trailing:!1})],8,Ut)):i("",!0),e.form.export_chart?(l(),S(V,{key:1,class:"mt-4 flex justify-center items-center btn-secondary text-center",color:"gray",icon:"i-heroicons-chart-bar",size:"xl",block:"",variant:"solid",label:"View charts",trailing:!1,onClick:t[18]||(t[18]=a=>h.value=!0)})):i("",!0),e.form.export_full_reports&&s(R)?(l(),f("a",{key:2,href:s(Z),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"QuantStats Report",trailing:!1})],8,zt)):i("",!0),e.form.export_csv&&s(R)?(l(),f("a",{key:3,href:s(K),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"CSV",trailing:!1})],8,Ot)):i("",!0),e.form.export_json&&s(R)?(l(),f("a",{key:4,href:s(ee),target:"_blank",class:"flex justify-center items-center btn-secondary text-center w-full"},[o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"JSON",trailing:!1})],8,Mt)):i("",!0),e.form.export_tradingview&&s(R)?(l(),f("a",{key:5,href:s(W),target:"_blank",class:"flex justify-center items-center btn-secondary text-center mb-4 w-full"},[o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-document-arrow-down",size:"xl",variant:"solid",label:"TradingView Pine Editor",trailing:!1})],8,It)):i("",!0),e.results.showResults&&e.results.alert&&e.results.alert.message?(l(),f("div",Bt,[o(B,{color:"teal",icon:"i-heroicons-check-circle",variant:"soft",title:e.results.alert.message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:t[19]||(t[19]=a=>e.results.alert.message="")},null,8,["title"])])):i("",!0),o(le,{class:"mt-8 mb-4",size:"lg",label:"General Info"}),o(Re,{data:e.results.info},null,8,["data"]),o(le,{class:"mt-8 mb-4",size:"lg",label:"Routes"}),o(Te,{data:e.results.routes_info,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),e.results.hyperparameters.length?(l(),S(le,{key:7,class:"mt-8 mb-4",size:"lg",label:"Hyperparameters"})):i("",!0),e.results.hyperparameters.length?(l(),S(ce,{key:8,data:e.results.hyperparameters},null,8,["data"])):i("",!0)])):(l(),f("div",Dt,[o(V,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:t[20]||(t[20]=a=>$((e._.provides[F]||e.$route).params.id))}),o(V,{class:"w-full flex justify-center mt-4",color:"gray",icon:"i-heroicons-plus",size:"xl",variant:"solid",label:"Start in a new tab",trailing:!1,onClick:t[21]||(t[21]=a=>T((e._.provides[F]||e.$route).params.id))})]))]))]),_:1})],64)}}}),Pt={class:"w-full"},Zt=J({__name:"[id]",setup(E){rt({title:"Backtest - Jesse"});const r=Ce(),u=x(()=>r.tabs),m=x(()=>Ze().params.id),d=x(()=>{if(!u.value[m.value]){const g=Object.keys(u.value);if(g.length>0){const n=u.value[g[0]];return Ke().push(`/backtest/${n.id}`),n}}return u.value[m.value]});return Object.keys(u.value).length===0&&r.addTab(),(g,n)=>{const h=Le,p=Nt;return l(),f(H,null,[_("div",Pt,[o(h,{"current-tab":d.value?d.value.id:null,tabs:u.value,mode:"backtest",onClose:s(r).closeTab,onCancel:s(r).cancel},null,8,["current-tab","tabs","onClose","onCancel"])]),d.value?(l(),S(p,{key:0,form:d.value.form,results:d.value.results},null,8,["form","results"])):i("",!0)],64)}}});export{Zt as default};
